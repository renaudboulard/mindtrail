import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as p}from"./index.DiEladB3.js";function k(t){const d=new Date;d.setHours(0,0,0,0);const n=new Date(t);n.setHours(0,0,0,0);const i=864e5,r=Math.floor((n.getTime()-d.getTime())/i);if(r<7)return[];const h=Math.floor(r/7),m=[],g=[{weeks:2,phase:"Foundation",sessions:[1],frequency:3},{weeks:2,phase:"Technical",sessions:[2,3],frequency:3},{weeks:2,phase:"Race Scenarios",sessions:[4,5],frequency:3},{weeks:1,phase:"Mental Armor",sessions:[6],frequency:3},{weeks:1,phase:"Race Simulation",sessions:[7],frequency:2,includeBonus:!0}],s=g.reduce((a,x)=>a+x.weeks,0),l=Math.min(h,s)/s;let u=new Date(d);for(const a of g){const x=Math.max(1,Math.round(a.weeks*l)),f=x*7,y=a.frequency*x,w=Math.floor(f/y);for(let c=0;c<y;c++){const b=c*w,N=new Date(u.getTime()+b*i);if(N>=n)break;const D=c%a.sessions.length,j=a.sessions[D];m.push({date:N,session:v(j),sessionNumber:j,phase:a.phase})}if(a.includeBonus){const c=new Date(n.getTime()-3*i),b=new Date(n.getTime()-1*i);c>u&&m.push({date:c,session:"Race Week Quick Protocol",sessionNumber:"bonus",phase:"Race Simulation"}),m.push({date:b,session:"Race Week Quick Protocol",sessionNumber:"bonus",phase:"Final Prep"})}u=new Date(u.getTime()+f*i)}return m.filter(a=>a.date<n).sort((a,x)=>a.date.getTime()-x.date.getTime())}function v(t){return{1:"Foundational Relaxation & Trail Senses",2:"Technical Descent Mastery",3:"Climb Resilience & Mental Toughness",4:"Night Running Confidence",5:"Aid Station Transitions & Fueling",6:"DNF Prevention & Race Resilience",7:"Full Race Day Simulation"}[t]||`Session ${t}`}const S={Foundation:"bg-blue-100 text-blue-700",Technical:"bg-purple-100 text-purple-700","Race Scenarios":"bg-amber-100 text-amber-700","Mental Armor":"bg-red-100 text-red-700","Race Simulation":"bg-emerald-100 text-emerald-700","Final Prep":"bg-emerald-200 text-emerald-800"};function T(t){return t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function P(){const[t,d]=p.useState(""),[n,i]=p.useState(""),r=p.useMemo(()=>t?k(new Date(t)):[],[t]),h=new Date;h.setDate(h.getDate()+7);const m=h.toISOString().split("T")[0],g=p.useMemo(()=>{const s={};for(const o of r)s[o.phase]||(s[o.phase]=[]),s[o.phase].push(o);return s},[r]);return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Your Training Programme"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Enter your race date to get a personalized listening schedule."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Race name (optional)"}),e.jsx("input",{type:"text",value:n,onChange:s=>i(s.target.value),placeholder:"e.g., UTMB, Western States",className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Race date"}),e.jsx("input",{type:"date",value:t,onChange:s=>d(s.target.value),min:m,className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]})]}),r.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:n?`${n} Preparation`:"Your Schedule"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[r.length," sessions over ",Math.ceil((new Date(t).getTime()-Date.now())/864e5/7)," weeks"]})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(g).map(([s,o])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:`text-xs font-semibold px-2.5 py-1 rounded-full ${S[s]||"bg-gray-100 text-gray-600"}`,children:s}),e.jsxs("span",{className:"text-xs text-gray-400",children:[o.length," sessions"]})]}),e.jsx("div",{className:"grid gap-2",children:o.map((l,u)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-xl border border-gray-100",children:[e.jsx("div",{className:"w-20 shrink-0 text-sm text-gray-500 font-medium",children:T(l.date)}),e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold shrink-0 ${l.sessionNumber==="bonus"?"bg-emerald-100 text-emerald-600":"bg-gray-100 text-gray-600"}`,children:l.sessionNumber==="bonus"?"â˜…":l.sessionNumber}),e.jsx("p",{className:"text-sm text-gray-700",children:l.session})]},`${s}-${u}`))})]},s))}),e.jsx("div",{className:"mt-6 p-4 bg-emerald-50 rounded-xl border border-emerald-100",children:e.jsxs("p",{className:"text-sm text-emerald-800",children:[e.jsx("strong",{children:"Tip:"})," Screenshot or print this schedule. Best times to listen: before sleep, during rest days, or during your cool-down after training."]})})]}),t&&r.length===0&&e.jsx("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-100",children:e.jsx("p",{className:"text-sm text-amber-800",children:"Your race is very soon! We need at least one week to build a meaningful programme. Consider using the Bonus Race Week Protocol for immediate benefit."})})]})}export{P as default};
